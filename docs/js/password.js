function genRangeChar(e,t,n){return Array.from({length:n},(()=>String.fromCharCode(getRandomInt(e,t))))}function wordsFromList(e,t){const n=[];for(let o=0;o<t;o+=1)n.push(e[getRandomInt(0,e.length)]);return n}async function generateWords(e,t){return wordsFromList(await grabFile(e),t)}async function grabFile(e){return new Promise((function(t,n){const o=new XMLHttpRequest;o.open("GET","resources/"+e+".txt"),o.onload=function(){t(o.responseText.split("\n"))},o.send(null)}))}function grabValue(e,t){let n=t;try{n=document.getElementById(e).value.replace(/\s/g,"")}catch(e){}return n}function grabBool(e,t){let n=t;try{n=document.getElementById(e).checked}catch(e){}return n}function calcPasswordStrength(e){const t=e.split("").reduce((function(e,t){return e[t]=(e[t]||0)+1,e}),{});return Object.keys(t).reduce((function(n,o){const r=t[o]/e.length;return n-=Math.log(r)/Math.log(2)*r}),0)*e.length}async function getWords(e=2,t="10k",n=!1){const o=grabValue("words",e),r=grabValue("wordlist",t),a=grabBool("customwl",n);let l=wordsFromList(await grabFile(r),o);return a&&(l=wordsFromList(document.getElementById("list").value.split("\n"),o)),l}async function new_complex(){everything=generate(await getWords(),grabValue("numbers",2),grabValue("symbols",2),grabValue("ascii",0),grabBool("uppercase",!0),grabBool("shuffle",!1));const e=everything.join("");document.getElementById("output").value=e,document.getElementById("password-strength").value=calcPasswordStrength(e)}async function new_no_special(){everything=generate(await getWords(),grabValue("numbers",2),grabValue("symbols",0),grabValue("ascii",0),grabBool("uppercase",!0),grabBool("shuffle",!1));const e=everything.join("");document.getElementById("output").value=e,document.getElementById("password-strength").value=calcPasswordStrength(e)}async function new_four_words(){everything=generate(await getWords(4),grabValue("numbers",0),grabValue("symbols",0),grabValue("ascii",0),grabBool("uppercase",!1),grabBool("shuffle",!1));const e=everything.join("-");document.getElementById("output").value=e,document.getElementById("password-strength").value=calcPasswordStrength(e)}function generate(e,t=2,n=2,o=0,r=!0,a=!1){const l=Array.from({length:t},(()=>Math.floor(10*Math.random()).toString())),s=genRangeChar(33,44,n),u=genRangeChar(33,127,o);r&&(e=e.map((e=>e.charAt(0).toUpperCase()+e.slice(1))));let c=[].concat(e,l,s,u);if(a)for(let e=c.length-1;e>0;e--){const t=getRandomInt(0,c.length);[c[e],c[t]]=[c[t],c[e]]}return c}function openWordlist(){openfiles(document.getElementById("files").files,["list"])}function check(){document.getElementById("password-strength").value=calcPasswordStrength(grabValue("input",""))}const MAX_FILE_SIZE=4194304;function openfiles(e,t){const n=[];for(let o=0;o<e.length;o++){const r=e[o],a=new FileReader;a.readAsText(r,"UTF-8"),a.onload=function(e){const n=e.target.result;n.length<MAX_FILE_SIZE?document.getElementById(t[o]).value=n:window.alert("File must be smaller than 1MB")},n.push(r.name)}return n}async function copy(){let e=document.getElementById("output");if(e.select(),e.setSelectionRange(0,99999),navigator.clipboard)try{await navigator.clipboard.writeText(e.value)}catch(e){window.alert("Failed to Copy: "+e)}}function getRandomInt(e,t){let n=window.crypto.getRandomValues(new Uint8Array(1))/256;return Math.floor(n*(t-e))+e}